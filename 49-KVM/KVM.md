# 虚拟化基础

## 传统的物理机部署方案

*   网络和存储规划 

*   服务器选型及采购 
*   服务器系统选择、系统安装、上架、配置网络 
*   应用规划及部署 
*   域名选择及注册,DNS配置名称解析 
*   测试外网访问

传统数据中心面临的问题：

*   服务器和网络设备资源利用率过低，并且无法共享,导致资源浪费
*   资源分配后进行调整困难
*   难以实现自动化
*   成本高昂

集群环境需要大量的服务器主机,硬件投入和后期维护管理成本巨大

## 虚拟化

虚拟化（Virtualization）是一种资源分配和管理技术，是将计算机的各种实体资源,比如CPU、内存、磁 盘空间、网络适配器等，进行抽象转换后虚拟的设备,可以实现灵活地分割、组合为一个或多个计算机配 置环境，并还支持重新分割、重新组合，以达到最大化合理利用物理资源的目的。

### 虚拟化优势

虚拟化可以提高 IT 敏捷性、灵活性和可扩展性，同时大幅节约成本。更高的工作负载移动性、更高的性 能和资源可用性、自动化运维 - 这些都是虚拟化的优势，虚拟化技术可以使 IT 部门更轻松地进行管理以 及降低拥有成本和运维成本。其优势包括：

*   资源超分,如实际的物理内存只有128G,可以给虚拟机分配200G内存 
*   降低资金成本和运维成本 
*   最大限度减少或消除停机 
*   提高 IT 部门的工作效率和响应能力 
*   加快应用和资源的调配速度 
*   提高业务连续性和灾难恢复能力 
*   简化数据中心管理
*    减少资源,比如IP和端口的冲突 
*   支持较旧的硬件和操作系统及应用

### 虚拟化类型

*   服务器虚拟化
    *   服务器虚拟化支持在单个物理服务器上运行多个操作系统,每个操作系统作为虚拟机独立运行。
*   网络虚拟化
    *   通过软件定义网络(Software Defined Network，SDN)，即网络的创建不再依赖于物理设备，如公有云 厂商支持用户自己通过配置界面创建新的网络，在 KVM、docker、kubernetes、openstack等虚拟化 技术中都使用到了网络虚拟化。
*   桌面虚拟化
    *   将桌面部署为托管的服务,使 IT 组织能够更快地响应不断变化的工作场所需求和新出现的机会。还可以将 虚拟化桌面和应用快速、轻松地交付给分支机构、外包和远程员工以及使用 iPad 和 Android 平板电脑 的移动员工。
*   应用虚拟化
    *   将软件应用通过网络实现虚拟化，比如 office 365,钉钉,企业微信
*   存储虚拟化
    *   将存储用软件虚拟化实现, 如 SAN/NAS(NFS/Samba)/GlusterFS/ceph等
*   库虚拟化
    *   在Linux上使用 wine来运行Windows 程序，在Mac系统使用CrossOver来运行Windows程序
*   容器虚技术
    *   当前比较火的虚拟化技术，典型代表: Docker、Containerd、Podman、Linux Container(LXC)、Pouch

## 虚拟机

虚拟计算机称为“虚拟机”(VM,Virtual  Machine)，它是一种严密隔离且内含操作系统和应用的软件容器。 每个虚拟机都是完全独立的。通过将多台虚拟机放置在一台物理计算机上，可仅在一台物理服务器或“主 机”上运行多个操作系统和应用，名为“hypervisor”的精简软件层可将虚拟机与主机分离开来，并根据需 要为每个虚拟机动态分配计算资源。

### 虚拟机的主要特性